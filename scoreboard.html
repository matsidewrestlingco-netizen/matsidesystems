<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <title>Matside Scoreboard</title>
  <script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>

  <style>
    body {
      background:black;
      color:white;
      font-family:Arial, sans-serif;
      text-align:center;
      padding:20px;
    }

    #scoreboard table {
      width:733px;
      margin:0 auto;
      border-collapse:collapse;
    }

    .label {
      font-size:18px;
      font-weight:bold;
      padding:5px 0;
    }

    #timer {
      font-size:58px;
      font-weight:900;
      padding:10px 0;
    }

    .name {
      font-size:22px;
      font-weight:bold;
      padding:8px 0;
    }

    .score-box {
      font-size:140px;
      font-weight:900;
      padding:20px;
      color:black;
      text-align:center;
    }

    .red { background:#ff0000; }
    .green { background:#00ff00; }
  </style>
</head>

<body>

<p>Matside Scoreboard</p>

<div id="scoreboard">
<table>
<tbody>

<tr>
<td class="label" style="width:204px;">MAT</td>
<td class="label" colspan="2" style="width:348px;">MATSIDE SCOREBOARD</td>
<td class="label" style="width:164px;">PERIOD</td>
</tr>

<tr>
<td id="mat-number" style="font-size:32px; font-weight:bold;">1</td>
<td></td><td></td>
<td id="period-number" style="font-size:32px; font-weight:bold;">1</td>
</tr>

<tr><td class="label" colspan="4">TIME</td></tr>

<tr><td id="timer" colspan="4">00:00</td></tr>

<tr>
<td id="red-name" class="name" colspan="2" style="color:#ff4444;">RED WRESTLER</td>
<td id="green-name" class="name" colspan="2" style="color:#66ff66;">GREEN WRESTLER</td>
</tr>

<tr>
<td class="score-box red" colspan="2"><span id="sb-p1">0</span></td>
<td class="score-box green" colspan="2"><span id="sb-p2">0</span></td>
</tr>

<tr>
<td colspan="4" style="background:black;">
  <img src="https://www.matside.org/assets/images/image01.png?v=809bcd3f"
       width="150" height="138">
</td>
</tr>

</tbody>
</table>
</div>

<script>
  const SERVER = "https://scoreboard-server-er33.onrender.com";
  const socket = io(SERVER, { transports:["websocket"] });

  function fmt(sec){
    const m = Math.floor(sec/60);
    const s = sec % 60;
    return (m<10?"0":"")+m + ":" + (s<10?"0":"")+s;
  }

  socket.on("stateUpdate", state => {
    document.getElementById("sb-p1").innerText = state.player1;
    document.getElementById("sb-p2").innerText = state.player2;

    document.getElementById("mat-number").innerText = state.mat;
    document.getElementById("period-number").innerText = state.period;

    document.getElementById("red-name").innerText = state.redName;
    document.getElementById("green-name").innerText = state.greenName;

    document.getElementById("timer").innerText = fmt(state.timeRemaining);
  });
</script>

</body>
</html>
