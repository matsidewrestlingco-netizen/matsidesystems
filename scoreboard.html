<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <title>Matside Scoreboard</title>
  <script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>

  <style>
    body {
      background:black;
      color:white;
      font-family:Arial, Helvetica, sans-serif;
      margin:0;
      padding:20px;
      text-align:center;
    }

    #scoreboard {
      max-width:900px;
      margin:0 auto;
      border:4px solid white;
      padding:20px;
      border-radius:8px;
    }

    .label { font-size:18px; font-weight:bold; letter-spacing:1px; }

    #timer { font-size:58px; font-weight:900; margin:10px 0; }

    table {
      width:100%;
      border-collapse:collapse;
      text-align:center;
    }

    .name {
      font-size:22px;
      font-weight:bold;
      padding:5px 0;
    }

    .score-box {
      font-size:140px;
      font-weight:900;
      padding:20px;
    }

    .red { background:#cc0000; }
    .green { background:#00aa00; }
  </style>

</head>
<body>

<div id="scoreboard">

  <table>
    <tr>
      <td class="label">MAT</td>
      <td colspan="2" class="label">MATSIDE SCOREBOARD</td>
      <td class="label">PERIOD</td>
    </tr>

    <tr>
      <td id="mat-number" style="font-size:32px; font-weight:bold;">1</td>
      <td></td><td></td>
      <td id="period-number" style="font-size:32px; font-weight:bold;">1</td>
    </tr>

    <tr><td colspan="4" class="label">TIME</td></tr>
    <tr><td colspan="4" id="timer">00:00</td></tr>

    <tr>
      <td colspan="2" class="name" id="red-name" style="color:#ff4444;">RED WRESTLER</td>
      <td colspan="2" class="name" id="green-name" style="color:#66ff66;">GREEN WRESTLER</td>
    </tr>

    <tr>
      <td colspan="2" class="score-box red">
        <span id="sb-p1">0</span>
      </td>
      <td colspan="2" class="score-box green">
        <span id="sb-p2">0</span>
      </td>
    </tr>

  </table>

</div>

<script>
  const SERVER = "https://scoreboard-server-er33.onrender.com";
  const socket = io(SERVER, { transports: ["websocket"] });

  function formatTime(sec) {
    const m = Math.floor(sec/60);
    const s = sec % 60;
    return (m<10?"0":"")+m + ":" + (s<10?"0":"")+s;
  }

  socket.on("stateUpdate", state => {
    if (!state) return;

    document.getElementById("sb-p1").innerText = state.player1 ?? 0;
    document.getElementById("sb-p2").innerText = state.player2 ?? 0;
    document.getElementById("timer").innerText = formatTime(state.timer ?? 0);

    document.getElementById("mat-number").innerText = state.mat ?? 1;
    document.getElementById("period-number").innerText = state.period ?? 1;

    document.getElementById("red-name").innerText = state.redName ?? "RED WRESTLER";
    document.getElementById("green-name").innerText = state.greenName ?? "GREEN WRESTLER";
  });
</script>

</body>
</html>
