<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Matside — Overview v3.1</title>

<script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
<style>
  :root {
    --bg: #070809;
    --panel: rgba(22, 24, 28, 0.8);
    --border: rgba(255,255,255,0.06);
    --muted: #9aa0a6;

    --red-back: #1a0000;
    --red-glow: #ff4444;

    --green-back: #001a00;
    --green-glow: #66ff66;

    --radius: 18px;
  }

  body {
    margin: 0;
    background: var(--bg);
    font-family: system-ui, -apple-system, "Segoe UI", Roboto, Arial;
    color: #fff;
    padding: 20px;
  }

  h1 {
    text-align: center;
    font-size: 28px;
    font-weight: 800;
    margin-bottom: 20px;
  }

  /* GRID LAYOUT */
  .grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 18px;
    max-width: 1400px;
    margin: 0 auto;
  }

  /* MAT CARD */
  .mat-card {
    background: var(--panel);
    border: 1px solid var(--border);
    border-radius: var(--radius);
    padding: 14px;
    backdrop-filter: blur(10px);
    box-shadow: 0 8px 24px rgba(0,0,0,0.35);
  }

  /* TOP ROW (MAT / TIME / PERIOD) */
  .top-row {
    display: flex;
    justify-content: space-between;
    margin-bottom: 12px;
  }

  .top-box {
    background: rgba(255,255,255,0.05);
    border-radius: var(--radius);
    padding: 10px 0;
    text-align: center;
    font-size: 18px;
    font-weight: 700;
    flex: 1;
    margin: 0 3px;
  }

  .time-box {
    font-size: 32px;
    font-weight: 800;
  }

  /* NAME ROW */
  .name-row {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 12px;
    margin-bottom: 12px;
  }

  .red-name {
    color: var(--red-glow);
    font-weight: 700;
    font-size: 18px;
    text-align: center;
  }

  .green-name {
    color: var(--green-glow);
    font-weight: 700;
    font-size: 18px;
    text-align: center;
  }

  /* SCORES */
  .score-row {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 12px;
  }

  .score-box {
    border-radius: var(--radius);
    padding: 35px 0;
    font-size: 54px;
    font-weight: 800;
    text-align: center;
  }

  .red-score {
    background: var(--red-back);
    border: 1px solid var(--red-glow);
    box-shadow: 0 0 12px var(--red-glow);
  }

  .green-score {
    background: var(--green-back);
    border: 1px solid var(--green-glow);
    box-shadow: 0 0 12px var(--green-glow);
  }
</style>
</head>
<body>

<h1>Matside — Event Overview</h1>

<div class="grid">
  <!-- 4 Mat Cards -->
  <div class="mat-card" id="mat1"></div>
  <div class="mat-card" id="mat2"></div>
  <div class="mat-card" id="mat3"></div>
  <div class="mat-card" id="mat4"></div>
</div>

<script>
const socket = io("https://scoreboard-server-er33.onrender.com");

socket.on("stateUpdate", (state) => {
  for (let i = 1; i <= 4; i++) {
    renderMat(i, state.mats[i]);
  }
});

function format(sec) {
  if (sec == null) return "--:--";
  const m = Math.floor(sec / 60).toString().padStart(2,"0");
  const s = (sec % 60).toString().padStart(2,"0");
  return m + ":" + s;
}

function renderMat(matNum, mat) {
  if (!mat) return;

  const root = document.getElementById("mat" + matNum);
  root.innerHTML = `
    <div class="top-row">
      <div class="top-box">MAT ${matNum}</div>
      <div class="top-box time-box">${format(mat.time)}</div>
      <div class="top-box">P ${mat.period}</div>
    </div>

    <div class="name-row">
      <div class="red-name">${mat.redName || "RED"}</div>
      <div class="green-name">${mat.greenName || "GREEN"}</div>
    </div>

    <div class="score-row">
      <div class="score-box red-score">${mat.red}</div>
      <div class="score-box green-score">${mat.green}</div>
    </div>
  `;
}
</script>

</body>
</html>
